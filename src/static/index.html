<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Example Module</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <meta content="favicon.ico" name="msapplication-TileImage">
  <meta content="transparent" name="msapplication-TileColor">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="expires" content="0">
  <script type="text/javascript">
    if (self != top) {
      top.location = self.location;
    }
  </script>
</head>

<body>
  <ul id="history"></ul>
  <input id="message" autocomplete="off" />
  <button id="submit">Send</button>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    const messageEl = document.querySelector('#message');
    const historyEl = document.querySelector('#history');

    document.querySelector('#submit').onclick = () => {
      socket.emit('chat message', (messageEl.value || '').trim());
      messageEl.value = '';
    };

    socket.on('chat message', function(msg){
      const li = document.createElement('li');
      li.textContent = msg;

      historyEl.append(li);
    });

  </script>
</body>

</html>
